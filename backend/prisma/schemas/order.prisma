model Order {
    id          Int    @id @default(autoincrement())
    card_name   String
    card_number String
    address     String
    phone       String

    status    Status   @default(processing)
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    user_id Int
    user    User @relation(fields: [user_id], references: [id])

    items    OrderItem[]
    orderlog OrderLog[]

    @@schema("order")
}

model OrderItem {
    id        Int      @id @default(autoincrement())
    price     Float
    quantity  Int
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    order_id Int
    order    Order @relation(fields: [order_id], references: [id])

    product_id Int
    product    Product @relation(fields: [product_id], references: [id])

    @@schema("order")
}

model OrderLog {
    id        Int      @id @default(autoincrement())
    status    Status
    timestamp DateTime @default(now())

    order_id Int   @unique
    order    Order @relation(fields: [order_id], references: [id])

    @@schema("order")
}

enum Status {
    processing
    shipped
    delivered
    cancelled

    @@schema("order")
}
